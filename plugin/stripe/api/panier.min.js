function calculTotalPanier(){var e=document.querySelectorAll("#panier tr [data-item='sstotal']"),t=0;return e.forEach(function(e){ssTotal=parseFloat(e.textContent.replace(",",".")),t+=ssTotal}),t=t.toFixed(2).toString().replace(".",","),t}function calculTotalCommande(){var e=0,t=parseFloat(calculTotalPanier().replace(",","."));return e=t,e=e.toFixed(2).toString().replace(".",","),e}var articles=document.querySelectorAll(".liste-produits--details");articles.forEach(function(e){e.querySelector("button").addEventListener("click",function(){var t=e.getAttribute("id"),a=new XMLHttpRequest,n=new FormData;n.append("title",e.querySelector("[data-item='title']").innerText),n.append("pu",e.querySelector("[data-item='pu']").innerText),a.open("POST","theme/"+theme+"/plugin/stripe/api/panier.ajax.php?mode=ajouter&id="+t),a.responseType="json",a.send(n),a.onload=function(){const e=a.response;document.querySelector(".panier--quantite").setAttribute("data-quantite",parseInt(e.qte)),light("Product added to cart",1e3),console.log(e)}})});articles=document.querySelectorAll(".modifier");articles.forEach(function(e){e.addEventListener("change",function(){var e=this.getAttribute("data-id"),t=this.value,a=new XMLHttpRequest;a.open("GET",path+"theme/"+theme+"plugin/stripe/api/panier.ajax.php?mode=modifier&id="+e+"&qte="+this.value,!0),a.responseType="json",a.onload=function(){const n=a.response;var r=document.querySelector("[data-id='"+e+"'] [data-item='pu']").textContent.replace(",","."),o=r*t;document.querySelector("[data-id='"+e+"'] [data-item='sstotal']").textContent=o.toFixed(2).toString().replace(".",","),document.querySelector("[data-item='total-panier']").textContent=calculTotalPanier(),document.querySelector("#mon-panier").setAttribute("data-quantite",parseInt(n.qte))},a.send()})});articles=document.querySelectorAll(".supprimer");articles.forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-id"),t=new XMLHttpRequest;t.open("GET",path+"theme/"+theme+"plugin/stripe/api/panier.ajax.php?mode=supprimer&id="+e,!0),t.responseType="json",t.onload=function(){const a=t.response;if(0==parseInt(a.qte))window.location.reload(!0);else{var n=document.querySelector('tr[data-id="'+e+'"]');n.parentNode.removeChild(n),document.querySelector("[data-item='total-panier']").textContent=calculTotalPanier(),document.querySelector("#mon-panier").setAttribute("data-quantite",parseInt(a.qte))}},t.send()})}),document.querySelector("#payer").addEventListener("click",function(e){e.preventDefault();const t=new FormData(panier);var a=document.querySelector("[data-item='total-panier']").innerText;t.append("total",a);const n=new XMLHttpRequest;n.open("POST",path+"theme/"+theme+(theme?"/":"")+"panier.ajax.php?mode=payer&permalink="+permalink,!0),n.onload=function(){const e=document.createRange().createContextualFragment(this.response);document.body.append(e)},n.send(t)});
function calculTotalPanier(){var e=document.querySelectorAll("#panier tr [data-item='sstotal']"),t=0;return e.forEach(function(e){ssTotal=parseFloat(e.textContent.replace(",",".")),t+=ssTotal}),t=t.toFixed(2).toString().replace(".",","),t}function calculTotalCommande(){var e=0,t=parseFloat(calculTotalPanier().replace(",","."));return e=t,e=e.toFixed(2).toString().replace(".",","),e}var articles=document.querySelectorAll(".acheter");articles.forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-id"),t=new XMLHttpRequest;t.open("GET",path+"theme/"+theme+"/panier.ajax.php?mode=ajouter&id="+e,!0),t.responseType="json",t.onload=function(){const e=t.response;document.querySelector("#mon-panier").setAttribute("data-quantite",parseInt(e.qte)),light("Produit ajout√© au panier",1e3)},t.send()})});articles=document.querySelectorAll(".modifier");articles.forEach(function(e){e.addEventListener("change",function(){var e=this.getAttribute("data-id"),t=this.value,a=new XMLHttpRequest;a.open("GET",path+"theme/"+theme+"/panier.ajax.php?mode=modifier&id="+e+"&qte="+this.value,!0),a.responseType="json",a.onload=function(){const n=a.response;var o=document.querySelector("[data-id='"+e+"'] [data-item='pu']").textContent.replace(",","."),r=o*t;document.querySelector("[data-id='"+e+"'] [data-item='sstotal']").textContent=r.toFixed(2).toString().replace(".",","),document.querySelector("[data-item='total-panier']").textContent=calculTotalPanier(),document.querySelector("[data-item='total-commande']").textContent=calculTotalCommande(),document.querySelector("#mon-panier").setAttribute("data-quantite",parseInt(n.qte))},a.send()})});articles=document.querySelectorAll(".supprimer");articles.forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-id"),t=new XMLHttpRequest;t.open("GET",path+"theme/"+theme+"/panier.ajax.php?mode=supprimer&id="+e,!0),t.responseType="json",t.onload=function(){const a=t.response;if(0==parseInt(a.qte))window.location.reload(!0);else{var n=document.querySelector('tr[data-id="'+e+'"]');n.parentNode.removeChild(n),document.querySelector("[data-item='total-panier']").textContent=calculTotalPanier(),document.querySelector("#mon-panier").setAttribute("data-quantite",parseInt(a.qte))}},t.send()})}),document.querySelector("#payer").addEventListener("click",function(e){e.preventDefault();const t=new FormData(panier);var a=document.querySelector("[data-item='total-commande']").textContent;t.append("total",a);const n=new XMLHttpRequest;n.open("POST",path+"theme/"+theme+(theme?"/":"")+"panier.ajax.php?mode=payer",!0),n.onload=function(){const e=document.createRange().createContextualFragment(this.response);document.body.append(e)},n.send(t)});
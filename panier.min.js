function calculTotalPanier(){var e=document.querySelectorAll("#panier [data-item='sstotal']"),t=0;return e.forEach(function(e){ssTotal=parseFloat(e.textContent.replace(",",".")),t+=ssTotal}),t=t.toFixed(2).toString().replace(".",","),t}function calculTotalCommande(){var e=0,t=parseFloat(calculTotalPanier().replace(",","."));return e=t,e=e.toFixed(2).toString().replace(".",","),e}var articles=document.querySelectorAll(".acheter");articles.forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-id"),t=new XMLHttpRequest;t.open("GET",path+"theme/"+theme+"/panier.ajax.php?mode=ajouter&id="+e,!0),t.responseType="json",t.onload=function(){const e=t.response;document.querySelector("#mon-panier").setAttribute("data-quantite",parseInt(e.qte)),light("Produit ajout√© au panier",1e3)},t.send()})});articles=document.querySelectorAll(".modifier");articles.forEach(function(e){e.addEventListener("change",function(){var e=this.getAttribute("data-id"),t=this.value,a=new XMLHttpRequest;a.open("GET",path+"theme/"+theme+"/panier.ajax.php?mode=modifier&id="+e+"&qte="+this.value,!0),a.responseType="json",a.onload=function(){const o=a.response;var n=document.querySelector("[data-id='"+e+"'] [data-item='pu']").textContent.replace(",","."),r=n*t;document.querySelector("[data-id='"+e+"'] [data-item='sstotal']").textContent=r.toFixed(2).toString().replace(".",","),document.querySelector("[data-item='total-panier']").textContent=calculTotalPanier(),document.querySelector("[data-item='total-commande']").textContent=calculTotalCommande(),document.querySelector("#mon-panier").setAttribute("data-quantite",parseInt(o.qte))},a.send()})});articles=document.querySelectorAll(".supprimer");articles.forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-id"),t=new XMLHttpRequest;t.open("GET",path+"theme/"+theme+"/panier.ajax.php?mode=supprimer&id="+e,!0),t.responseType="json",t.onload=function(){const a=t.response;if(0==parseInt(a.qte))window.location.reload(!0);else{var o=document.querySelector('tr[data-id="'+e+'"]');o.parentNode.removeChild(o),document.querySelector("[data-item='total-panier']").textContent=calculTotalPanier(),document.querySelector("#mon-panier").setAttribute("data-quantite",parseInt(a.qte))}},t.send()})});var contact=get_cookie("coordonnees");contact&&(contact=JSON.parse(contact),$.each(contact,function(e,t){"cookie"==t.name&&"on"==t.value?$("#panier #cookie").prop("checked",!0):$("#panier #coordonnees input[name='"+t.name+"']").val(t.value)})),$("#panier #coordonnees input, #panier #cookie").on("change",function(e){$("#panier #cookie").prop("checked")||set_cookie("coordonnees","",0),$("#panier #cookie").prop("checked")&&set_cookie("coordonnees",JSON.stringify($("#panier").serializeArray()),180)}),$("body").on("change","#panier #prix-livraison",function(e){$("#rgpdcheckbox").prop("checked",!1),$.ajax({type:"POST",url:path+"theme/"+theme+"/panier.php",data:{mode:"livraison",name:$(this).val(),prix:$(":selected",this).data("prix"),palier:$(":selected",this).data("palier"),transporteur:$(":selected",this).data("transporteur")},success:function(e){$("body").append(e)}})});